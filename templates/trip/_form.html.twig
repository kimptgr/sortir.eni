{% form_theme form 'tailwind_2_layout.html.twig' %}

{% block javascript %}
<script>
    // initialisation à zéro pour ensuite le remplacer dans le javascript
{% set apiCityPlacesUrl = path('api_city_places', {'cityId': 0}) %}
{% set apiPlaceInfoUrl = path('api_places_info', { 'placeId':0}) %}
const apiCityPlacesUrl = '{{ apiCityPlacesUrl }}';
const apiPlaceInfoUrl = '{{ apiCityPlacesUrl }}';

</script>
{% endblock %}

{{ form_start(form, { attr: { id: 'form-new-trip' } }) }}

    {#    Utilisation d'un ternaire pour changer la couleur de "border" des champs ayant une erreur, le .vars est utilisé pour extraire les
informations du champ  (état de validation / messages d'erreur) .
    J'avais oublié un essapce après le rouded, cela créait une erreur lors de la concatenation avec ~

    my-4 marge vertical (haut et bas de 4)
    #}

    {{ form_row(form.name, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.name.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}

    {{ form_row(form.startDateTime, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.startDateTime.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}


    {{ form_row(form.registrationDeadline, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.registrationDeadline.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}

    {{ form_row(form.nbRegistrationMax, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.nbRegistrationMax.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}

    {{ form_row(form.duration, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.duration.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}

    {{ form_row(form.info, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.info.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
        attr: {
            rows: 15,
            placeholder: 'Entrez votre description ici...'
        }
    }) }}

    {{ form_row(form.relativeCampus, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.relativeCampus.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}

    {{ form_row(form.city, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.city.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}


    {{ form_row(form.place, {
        row_class: 'form-row',
        label_class: 'label',
        widget_class: 'w-50 p-2 border border-gray-300 rounded ' ~ (form.place.vars.valid ? 'border-gray-300' : 'border-red-500'),
        error_item_class: 'label-error',
    }) }}
{# MODAL #}
{# Modale pour créer une nouvelle adresse #}
<div id="modal-add-place" hidden>
    <meta name="csrf-token" content="{{ csrfToken }}">
    <div class="modal-content">
        <h2 id="placetitle">Ajouter un nouveau lieu</h2>
        <div class="form-row">
            <label for="place_name">Nom</label>
            <input type="text" id="place_name" name="name">
        </div>
        <div class="form-row">
            <label for="place_street">Rue</label>
            <input type="text" id="place_street" name="street">
        </div>
        <div class="form-row">
            <label for="place_latitude">Latitude</label>
            <input type="number" id="place_latitude" name="latitude" step="0.000001">
        </div>
        <div class="form-row">
            <label for="place_longitude">Longitude</label>
            <input type="number" id="place_longitude" name="longitude" step="0.000001">
        </div>
        <button type="button" id="btn-close-form" class="btn btn-search">Annuler l'ajout du lieu</button>
        <button type="button" id="form-nouveau-lieu" class="btn btn-add font-bold">Enregistrer le lieu</button>
    </div>
</div>
{# ENDMOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOODAL #}
<div class="form-row">
    <label class="label">Rue :</label>
    <input type="text" id="street" class="w-50 p-2 border border-gray-300 rounded" readonly/>
</div>
<div class="form-row">
    <label class="label">Code postal :</label>
    <input type="text" id="postalCode" class="w-50 p-2 border border-gray-300 rounded" readonly/>
</div>
<div class="form-row">
    <label class="label">Latitude :</label>
    <input type="text" id="latitude" class="w-50 p-2 border border-gray-300 rounded" readonly/>
</div>
<div class="form-row">
    <label class="label">Longitude :</label>
    <input type="text" id="longitude" class="w-50 p-2 border border-gray-300 rounded" readonly/>
</div>


<button type="submit"
        class=" my-4 ml-4 rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">{{ button_label|default('Publier la sortie') }}</button>
<button type="submit" name="save"
        class="my-4 ml-4 rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
    Enregistrer
</button>
{% if button_delete %}
    <button type="submit" name="delete"
            class="my-4 ml-4 rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
        Supprimer
    </button>
{% endif %}
<button type="button" class=" my-4 ml-4 text-sm/6 font-semibold text-gray-900" onclick="window.history.back();">
    Annuler
</button>

{{ form_end(form) }}

